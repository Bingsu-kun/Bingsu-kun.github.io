<!DOCTYPE html><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>GCP 이용 중 yum install error | HEPHAI's devlog</title><meta name="author" content="Hephai (JangHoon Lee)"><meta name="description" content="Mainly about coding, also my hobbys."><meta property="og:title" content="GCP 이용 중 yum install error | HEPHAI's devlog"><meta property="og:url" content="http://localhost:4000/2021/03/29/GCP-%EC%9D%B4%EC%9A%A9-%EC%A4%91-yum-install-error/"><meta property="og:site_name" content="HEPHAI's devlog"><meta property="og:description" content="Mainly about coding, also my hobbys."><meta property="og:image" content="https://res.cloudinary.com/danhdvla9/image/upload/v1615973205/Thumbnails/Troubleshooting-Icon_ou9s2b.png"><meta property="og:type" content="blog"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="Mainly about coding, also my hobbys."><meta name="twitter:title" content="GCP 이용 중 yum install error | HEPHAI's devlog"><meta name="twitter:url" content="http://localhost:4000/2021/03/29/GCP-%EC%9D%B4%EC%9A%A9-%EC%A4%91-yum-install-error/"><meta name="twitter:site" content="HEPHAI's devlog"><meta name="twitter:creator" content="@"><meta name="twitter:domain" content="http://localhost:4000"><meta property="twitter:image" content="https://res.cloudinary.com/danhdvla9/image/upload/v1615973205/Thumbnails/Troubleshooting-Icon_ou9s2b.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Lora|Space+Mono:700"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" href="/assets/css/main.css"><link rel="alternate" type="application/rss+xml" title="HEPHAI's devlog" href="http://localhost:4000/feed.xml"><link rel="canonical" href="http://localhost:4000/2021/03/29/GCP-%EC%9D%B4%EC%9A%A9-%EC%A4%91-yum-install-error/"></head><main><article itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting"><header class="section-padding--lg mast rellax" data-rellax-speed="-4"> <a class="nav nav--white" href="/"> <i class="fa fa-lg fa-arrow-left"></i> <span>Back to Posts</span> </a><figure class="absolute-bg mast__img" style="background-image: url('https://res.cloudinary.com/danhdvla9/image/upload/v1615973205/Thumbnails/Troubleshooting-Icon_ou9s2b.png');"></figure><div class="mast__container"> <span><time datetime="2021-03-29T00:00:00+09:00" itemprop="datePublished">Mar 29, 2021</time></span><h1 itemprop="name headline">GCP 이용 중 yum install error</h1><span>Posted in <a class="nav--white" href="/category/troubleshooting">TroubleShooting</a> </span> <span></span></div></header><section class="section-padding bg-grey" itemprop="articleBody"><div class="post"><h3 id="issue">Issue</h3><p><br /> <br /></p><p>Google Cloud Platform에서 Compute Engine 서비스로 CentOS 7 이용 중 yum install error가 발생하여 설치가 안되는 상황.</p><p><br /></p><p><img src="https://res.cloudinary.com/danhdvla9/image/upload/v1616996607/ScreenShots/21-03-29/1_bqgqeu.png" alt="error" /> <strong>yum signature could not be verified</strong>로 통칭되는 오류이다.</p><p><br /> <br /></p><h3 id="steps-to-reproduce-the-issue">Steps to reproduce the issue</h3><p><br /> <br /></p><p>그저 GCP나 AWS Instance를 LinuxOS로 생성하고 yum, apt 등의 패키지 매니저를 통해 install 하려하면 등장한다.</p><p>stackoverflow에서 같은 오류를 겪은 사람이 어떻게 해결했나 보러 다녔는데, 항상 발생하는 것은 아니고 가끔씩 gpg key에 의해 발생하는 오류로 추정된다고 하더라.</p><p>GCP나 AWS Linux를 이용하다보면 드물게 발생한다는데…. <del>이런건 왜 나만 걸리는 걸까</del></p><p><br /> <br /></p><h3 id="troubleshooting">TroubleShooting</h3><p><br /> <br /></p><p>처음 접근은 에러메세지에서 추천하는 방법 중 <code class="highlighter-rouge">--disablerepo</code> 옵션을 사용한 방법을 실행하였지만 같은 오류의 반복이었다.</p><p><em>이 부분에서 에러메세지를 자세히 보지 않고 간과한 것이 빙 돌아가는 길의 시작이었다.</em></p><p><br /></p><p>두번째로 gpg key를 몽땅 갈아엎고 새로 업데이트 시키자고 생각하여</p><p><code class="highlighter-rouge">rpm --import &lt;(curl -s -L https://packages.cloud.google.com/yum/doc/yum-key.gpg)</code></p><p>명령으로 새로운 키를 받아와보려했으나 write body failed가 뜨면서 어려워졌다.</p><p><br /></p><p>다시 오류메세지를 제대로 읽어보자고 생각, <code class="highlighter-rouge">--disablerepo=google-cloud-sdk</code> 옵션을 이용하여 에러메세지를 띄우고 보았더니 <code class="highlighter-rouge">google-compute-engine</code> 이라는 레포지토리가 하나 더 걸려서 에러가 지속되었던 것.</p><p>최종적으로</p><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo yum install wget --disablerepo=google-cloud-sdk,google-compute-engine -y
</code></pre></div></div><p>처럼 걸리는 레포지토리들을 전부 <code class="highlighter-rouge">--disablerepo</code> 옵션으로 걸러내주니 정상 작동하였다.</p><p><img src="https://res.cloudinary.com/danhdvla9/image/upload/v1616996607/ScreenShots/21-03-29/2_nxe0jc.png" alt="complete" /> <em>예에~</em></p><p>하지만 명령마다 저 옵션을 써주기엔 너무 번거로워서 조금 더 시간을 내어 완벽하게 오류를 고쳐보려했으나</p><p><img src="https://res.cloudinary.com/danhdvla9/image/upload/v1616996607/ScreenShots/21-03-29/3_udzgxq.png" alt="find error" /> <em>(처절한 에러와의 싸움.png)</em></p><p><br /></p><p>고쳐지는건 나였고, 구글의 프로그래머 분들에게 떠넘기기로 했다. <del>헤헤</del></p><p><br /></p><hr /><p><br /></p><h3 id="추가">추가</h3><p><br /> <br /></p><p>글을 적으면서 문득 떠오른것이, ‘어 그럼 gpg 키 검사 안하면 되는거 아닌가?’</p><p>그래서 <code class="highlighter-rouge">--nogpgcheck</code> 옵션으로 해봤더니 또 잘된다.</p><p>gpg key는 무엇이고 왜 없어도 잘 동작되는지 궁금해지기 시작했다.</p></div></section><section class="profile"><div class="profile__card"><div class="profile__img"><figure class="absolute-bg" style="background-image: url('https://res.cloudinary.com/danhdvla9/image/upload/v1614694302/Blacksmith_vqd5bz.png');"></figure></div><div class="profile__container"><p>Interested in backend dev, cloud engineering, blockchain. Usually do camping, fishing, cooking, exercising on holiday. And also enjoy editing videos that I took this hobbys.</p><ul class="profile__social"><li><a class="fa fa-lg fa-envelope-o" href="mailto:icetime963@gmail.com"></a></li><li><a class="fa fa-lg fa-github" href="https://github.com/bingsu-kun" target="_blank"></a></li></ul></div></div></section></article><section class="next"> <a class="next__link" href="/2021/03/23/SCOFE2021-Review/" style="background-image: url('https://res.cloudinary.com/danhdvla9/image/upload/v1616490266/Thumbnails/plan_and_review_knmqv5.jpg');"><div class="next__container"> <span>Read Next</span><h2>SCOFE2021 Review</h2></div></a></section></main><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/rellax/1.0.0/rellax.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script> <script type="text/javascript" src="/assets/js/app.js"></script></body></html>
